<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Club Maul</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="page-bg page-bg-a"></div>
  <div class="page-bg page-bg-b is-hidden"></div>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand-row">
        <div class="logo">
          <span class="logo-dot" aria-hidden="true"></span>
          <span>Club Maul</span>
        </div>
      </div>
      <nav class="nav-links" aria-label="Primary">
        <a href="#home">Home</a>
        <a href="#beast">Beast Team</a>
        <a href="#photography">Photography Team</a>
        <a href="#hosting">Hosting Team</a>
        <a href="#security">Security Team</a>
        <a href="#writing">Writing Team</a>
        <a href="#hr">HR Team</a>
        <a href="#creative">Creative Team</a>
        <a href="#media">Media Team</a>
      </nav>
    </div>
  </header>

  <main>
    <section id="home" class="hero">
      <div class="hero-bg hero-bg-a"></div>
      <div class="hero-bg hero-bg-b is-hidden"></div>
      <div class="hero-content">
        <h1>Welcome to Club Maul</h1>
        <p>Discover the teams that power our group - from the terrifying beasts at the forefront, to the creative minds behind the scenes. Hover the top bar to explore each team.</p>
      </div>
    </section>

    <section class="grid">
      <article id="beast" class="card">
        <h2>Beast Team</h2>
        <p>The scare actors that make your heart race!</p>
      </article>
      <article id="photography" class="card">
        <h2>Photography Team</h2>
        <p>Capturing the spirit of our events and projects in crisp detail.</p>
      </article>
      <article id="hosting" class="card">
        <h2>Hosting Team</h2>
        <p>The central pillar of each event, and the life of the party.</p>
      </article>
      <article id="security" class="card">
        <h2>Security Team</h2>
        <p>Protecting our systems and community, ensuring everyone has a safe - and scary - experience!</p>
      </article>
      <article id="writing" class="card">
        <h2>Writing Team</h2>
        <p>LORE! Lots and lots and lots of lore!</p>
      </article>
      <article id="hr" class="card">
        <h2>HR Team</h2>
        <p>Supporting members, onboarding newcomers, and nurturing our group's culture.</p>
      </article>
      <article id="creative" class="card">
        <h2>Creative Team</h2>
        <p>Design, branding, and the visual language that makes us stand out.</p>
      </article>
      <article id="media" class="card">
        <h2>Media Team</h2>
        <p>Photography.. at 60 frames per second!</p>
      </article>
    </section>

    <div class="divider">
      <h2>What are hunts?</h2>
    </div>
  </main>

  <div id="hunts" class="hunts-bg-section">
    <div class="page-bg page-bg-c"></div>
    <div class="page-bg page-bg-d is-hidden"></div>
  </div>

  <footer>
    2025 Club Maul â€” Made with curiosity and teamwork.
  </footer>
  <script src="script.js"></script>
  <script>
    (function () {
      const swapMs = 5000;

      const setBg = (el, url) => {
        el.style.backgroundImage = `url(${url})`;
      };

      const startHero = (bgA, bgB, images, eventName) => {
        if (!bgA || !bgB || !Array.isArray(images) || !images.length) return;
        
        let index = 0;
        let useA = true;
        setBg(bgA, images[0]);
        bgA.classList.remove("is-hidden");
        if (images.length === 1) return;
        
        setInterval(() => {
          index = (index + 1) % images.length;
          const incoming = useA ? bgB : bgA;
          const outgoing = useA ? bgA : bgB;
          setBg(incoming, images[index]);
          incoming.classList.remove("is-hidden");
          outgoing.classList.add("is-hidden");
          useA = !useA;
        }, swapMs);
      };

      // First hero (home section)
      const bgA = document.querySelector(".page-bg-a") || document.querySelector(".hero-bg-a");
      const bgB = document.querySelector(".page-bg-b") || document.querySelector(".hero-bg-b");
      
      const readyFirst = () => {
        if (window.clubmaulHeroImages?.length) {
          startHero(bgA, bgB, window.clubmaulHeroImages);
          return true;
        }
        return false;
      };

      if (!readyFirst()) {
        window.addEventListener("clubmaul:heroImagesReady", (e) => {
          startHero(bgA, bgB, e.detail.images);
        });
      }

      // Hunts background section
      const bgC = document.querySelector(".page-bg-c");
      const bgD = document.querySelector(".page-bg-d");
      
      const readyHunts = () => {
        if (window.clubmaulHuntsImages?.length) {
          startHero(bgC, bgD, window.clubmaulHuntsImages);
          return true;
        }
        return false;
      };

      if (!readyHunts()) {
        window.addEventListener("clubmaul:huntsImagesReady", (e) => {
          startHero(bgC, bgD, e.detail.images);
        });
      }
    })();
  </script>
</body>
</html>